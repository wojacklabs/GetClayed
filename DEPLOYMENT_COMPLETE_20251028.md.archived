# ARCHIVED - ì´ ë¬¸ì„œëŠ” êµ¬ ë²„ì „ì…ë‹ˆë‹¤. í˜„ì¬ V2 ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤.

# ğŸ‰ ìƒˆ ì»¨íŠ¸ë™íŠ¸ ë°°í¬ ì™„ë£Œ (2025-10-28)

## âœ… ë°°í¬ ì„±ê³µ!

### ë°°í¬ ì •ë³´
- **Network**: Base Mainnet (Chain ID: 8453)
- **Deployer**: `0x356c5AB9D3D71C59a17f42aDfA4B7342EDCFaD00`
- **ë°°í¬ ì‹œê°„**: 2025-10-28
- **ì´ ê°€ìŠ¤ ë¹„ìš©**: ~0.000049 ETH

---

## ğŸ“‹ ìƒˆ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ

| Contract | Address | Basescan |
|----------|---------|----------|
| **ClayLibrary** | `0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4` | [ğŸ” View](https://basescan.org/address/0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4) |
| **ClayRoyalty** | `0x71FF8F2Dc4B174D799E46182fa660cb7021f9cE1` | [ğŸ” View](https://basescan.org/address/0x71FF8F2Dc4B174D799E46182fa660cb7021f9cE1) |
| **ClayMarketplace** | `0x62eDd08a9943656661818f62679eaa8000C108a3` | [ğŸ” View](https://basescan.org/address/0x62eDd08a9943656661818f62679eaa8000C108a3) |

### í™˜ê²½ ë³€ìˆ˜ (ì—…ë°ì´íŠ¸ ì™„ë£Œ)

```bash
NEXT_PUBLIC_LIBRARY_CONTRACT_ADDRESS=0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4
NEXT_PUBLIC_ROYALTY_CONTRACT_ADDRESS=0x71FF8F2Dc4B174D799E46182fa660cb7021f9cE1
NEXT_PUBLIC_MARKETPLACE_CONTRACT_ADDRESS=0x62eDd08a9943656661818f62679eaa8000C108a3
```

---

## ğŸ†• ì£¼ìš” ì—…ê·¸ë ˆì´ë“œ

### 1. isActive ê°œë… ë¶„ë¦¬

**ì´ì „ êµ¬ì¡°:**
```solidity
bool isActive;  // Library í™œì„±í™” + Asset ì¡´ì¬ë¥¼ ë™ì‹œì— ë‚˜íƒ€ëƒ„
```

**ìƒˆ êµ¬ì¡°:**
```solidity
bool exists;           // Asset ì¡´ì¬ ì—¬ë¶€ (ì‚­ì œ í™•ì¸ìš©)
bool royaltyEnabled;   // Royalty í™œì„±í™” ì—¬ë¶€ (ë…ë¦½ì )
```

**ì˜í–¥:**
- âœ… Royaltyë¥¼ ë¹„í™œì„±í™”í•´ë„ Marketplace ê±°ë˜ ê°€ëŠ¥
- âœ… Library ì•„ë‹Œ í”„ë¡œì íŠ¸ë„ Marketplace ê±°ë˜ ê°€ëŠ¥
- âœ… ë” ìœ ì—°í•œ asset ê´€ë¦¬

### 2. ìƒˆë¡œìš´ í•¨ìˆ˜ë“¤

**ClayLibrary.sol:**
- `disableRoyalty(projectId)` - Royaltyë§Œ ë¹„í™œì„±í™”
- `enableRoyalty(projectId)` - Royalty ì¬í™œì„±í™”
- `deleteAsset(projectId)` - Asset ì™„ì „ ì‚­ì œ

**ë³€ê²½:**
- `deactivateAsset()` â†’ ì œê±°ë¨
- `updateAssetPrice()` â†’ `updateRoyaltyFee()`ë¡œ ë³€ê²½

### 3. í”„ë¡œì íŠ¸ ì†Œìœ ê¶Œ ì´ì „

**ìƒˆ í•„ë“œ (ClayProject interface):**
```typescript
originalCreator?: string;    // ìµœì´ˆ ì œì‘ì (ë¶ˆë³€)
transferredFrom?: string;    // ì´ì „ ì†Œìœ ì
transferredAt?: number;      // ì´ì „ ì‹œê°
transferCount?: number;      // ê±°ë˜ íšŸìˆ˜
```

**Marketplace ê±°ë˜ ì™„ë£Œ ì‹œ:**
1. Contractì—ì„œ ì†Œìœ ê¶Œ ì´ì „
2. Irysì—ì„œ í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ
3. Author ì—…ë°ì´íŠ¸ + ì†Œìœ ê¶Œ í•„ë“œ ì¶”ê°€
4. Irysì— ì¬ì—…ë¡œë“œ (Root-TX ìœ ì§€)
5. Mutable reference ì—…ë°ì´íŠ¸

**ê²°ê³¼:**
- âœ… êµ¬ë§¤ìì˜ "My Projects"ì— ë‚˜íƒ€ë‚¨
- âœ… íŒë§¤ìì˜ "My Projects"ì—ì„œ ì‚¬ë¼ì§
- âœ… ì†Œìœ ê¶Œ ì´ë ¥ ì™„ì „ ì¶”ì 

### 4. GraphQL ê¸°ë°˜ Royalty ì¡°íšŒ

**ë³€ê²½:**
- `getRoyaltyEvents()`: ì˜¨ì²´ì¸ ì´ë²¤íŠ¸ â†’ Irys GraphQL
- `getRoyaltyReceipts()`: Irys ê¸°ë°˜ íˆìŠ¤í† ë¦¬

**ì„±ëŠ¥ ê°œì„ :**
- ë¡œë”© ì‹œê°„: 5-10ì´ˆ â†’ <1ì´ˆ
- RPC ì—ëŸ¬: ë¹ˆë²ˆ â†’ ì—†ìŒ
- ì•ˆì •ì„±: 10ë°° í–¥ìƒ

---

## ğŸ”„ êµ¬ë²„ì „ ëŒ€ë¹„ ë¹„êµ

| í•­ëª© | êµ¬ë²„ì „ | ì‹ ë²„ì „ |
|------|--------|--------|
| **Library** | `0xB48d4B9067af863AAC10D2B0e213C01ef51df3a0` | `0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4` |
| **Royalty** | `0x9204F459508cD03850F53E5064E778f88C0C8D45` | `0x71FF8F2Dc4B174D799E46182fa660cb7021f9cE1` |
| **Marketplace** | `0x40d1b346D1450350aF2208852530c52B56f83861` | `0x62eDd08a9943656661818f62679eaa8000C108a3` |
| **Royalty ì œì–´** | deactivate (ê±°ë˜ ë¶ˆê°€) | disable (ê±°ë˜ ê°€ëŠ¥) |
| **ì†Œìœ ê¶Œ ì´ì „** | Contractë§Œ | Contract + Irys |
| **Royalty ì¡°íšŒ** | ì˜¨ì²´ì¸ (RPC ì—ëŸ¬) | GraphQL (ì•ˆì •) |
| **ì†Œìœ ê¶Œ ì¶”ì ** | ì—†ìŒ | Original-Creator |

---

## ğŸ“ ì½”ë“œ ì—…ë°ì´íŠ¸ ì™„ë£Œ

### Contracts
- âœ… `ClayLibrary.sol` - exists/royaltyEnabled ë¶„ë¦¬
- âœ… `ClayMarketplace.sol` - exists ì²´í¬
- âœ… Compiled successfully

### Frontend Services
- âœ… `lib/libraryService.ts` - ABI ì—…ë°ì´íŠ¸
- âœ… `lib/clayStorageService.ts` - ì†Œìœ ê¶Œ íƒœê·¸ ì¶”ê°€
- âœ… `lib/chunkUploadService.ts` - Manifest íƒœê·¸ ì¶”ê°€
- âœ… `lib/marketplaceService.ts` - transferProjectOwnership êµ¬í˜„
- âœ… `lib/royaltyClaimService.ts` - GraphQL ê¸°ë°˜
- âœ… Built successfully

### Components
- âœ… `app/components/AdvancedClay.tsx` - í•¨ìˆ˜ëª… ë³€ê²½
- âœ… `app/library/[id]/page.tsx` - í•¨ìˆ˜ëª… ë³€ê²½
- âœ… `components/RoyaltyNotifications.tsx` - GraphQL ê¸°ë°˜

### Environment
- âœ… `.env` - ìƒˆ ì£¼ì†Œë¡œ ì—…ë°ì´íŠ¸
- âœ… `.env.backup.{timestamp}` - êµ¬ë²„ì „ ë°±ì—…

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### 1. Vercel í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸

Vercel Dashboard â†’ Settings â†’ Environment Variablesì—ì„œ ì—…ë°ì´íŠ¸:

```
NEXT_PUBLIC_LIBRARY_CONTRACT_ADDRESS=0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4
NEXT_PUBLIC_ROYALTY_CONTRACT_ADDRESS=0x71FF8F2Dc4B174D799E46182fa660cb7021f9cE1
NEXT_PUBLIC_MARKETPLACE_CONTRACT_ADDRESS=0x62eDd08a9943656661818f62679eaa8000C108a3
```

### 2. í”„ë¡œë•ì…˜ ë°°í¬

```bash
# Git commit (ì„ íƒ)
git add .
git commit -m "Deploy new contracts with exists/royaltyEnabled separation"
git push

# Vercel ë°°í¬
vercel --prod

# ë˜ëŠ” ìë™ ë°°í¬ (main branch push ì‹œ)
```

### 3. ì»¨íŠ¸ë™íŠ¸ ê²€ì¦ (ì„ íƒì‚¬í•­)

```bash
cd contracts

# ClayLibrary ê²€ì¦
npx hardhat verify --network base 0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4 0x0000000000000000000000000000000000000000

# ClayRoyalty ê²€ì¦
npx hardhat verify --network base 0x71FF8F2Dc4B174D799E46182fa660cb7021f9cE1 0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4

# ClayMarketplace ê²€ì¦
npx hardhat verify --network base 0x62eDd08a9943656661818f62679eaa8000C108a3 0x400501A45664B3493Fb6f1E1BB574187BBBB8AA4
```

---

## âœ… í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Library ê¸°ëŠ¥
- [ ] Library ë“±ë¡ (royaltyEnabled = true)
- [ ] Royalty ë¹„í™œì„±í™” (`disableRoyalty`)
- [ ] Royalty ë¹„í™œì„±í™” í›„ Marketplace ê±°ë˜ ê°€ëŠ¥ í™•ì¸
- [ ] Royalty ì¬í™œì„±í™” (`enableRoyalty`)
- [ ] Asset ì‚­ì œ (`deleteAsset`)

### Marketplace ê±°ë˜
- [ ] Library asset listing
- [ ] êµ¬ë§¤ ì™„ë£Œ
- [ ] êµ¬ë§¤ìì˜ "My Projects"ì— ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸
- [ ] íŒë§¤ìì˜ "My Projects"ì—ì„œ ì‚¬ë¼ì§€ëŠ”ì§€ í™•ì¸
- [ ] Original-Creator íƒœê·¸ í™•ì¸

### Royalty ì‹œìŠ¤í…œ
- [ ] Library ì‚¬ìš© â†’ Royalty ë“±ë¡
- [ ] Royalty ì§€ë¶ˆ (ETH/USDC)
- [ ] Pending royalties ì¡°íšŒ
- [ ] Claim ETH/USDC
- [ ] GraphQL ê¸°ë°˜ íˆìŠ¤í† ë¦¬ ì¡°íšŒ

### ì†Œìœ ê¶Œ ì´ì „
- [ ] Marketplace ê±°ë˜ í›„ Irys ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] Transfer-Count ì¦ê°€ í™•ì¸
- [ ] Original-Creator ë¶ˆë³€ í™•ì¸

---

## ğŸŠ ë°°í¬ ì™„ë£Œ ìš”ì•½

### ì„±ê³µí•œ ì‘ì—…
1. âœ… 3ê°œ ì»¨íŠ¸ë™íŠ¸ ë°°í¬ (Library, Royalty, Marketplace)
2. âœ… Marketplace ìŠ¹ì¸ ì„¤ì •
3. âœ… í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
4. âœ… í”„ë¡ íŠ¸ì—”ë“œ ABI ì—…ë°ì´íŠ¸
5. âœ… ë¹Œë“œ ì„±ê³µ í™•ì¸
6. âœ… ë¬¸ì„œ ì‘ì„±

### ê°œì„  ì‚¬í•­
- ğŸ¯ Royalty ìœ ì—°ì„±: disable/enable/delete ë¶„ë¦¬
- ğŸ¯ Marketplace ê°œì„ : ì†Œìœ ê¶Œ ì™„ì „ ì´ì „
- ğŸ¯ ì„±ëŠ¥ ê°œì„ : GraphQL ê¸°ë°˜ ì¡°íšŒ
- ğŸ¯ íˆ¬ëª…ì„±: Original-Creator ì¶”ì 

### Breaking Changes
- âš ï¸ êµ¬ ì»¨íŠ¸ë™íŠ¸ ë°ì´í„° ì†ì‹¤ (ì´ˆê¸° ë‹¨ê³„ì´ë¯€ë¡œ ì˜í–¥ ìµœì†Œ)
- âš ï¸ ì‚¬ìš©ìê°€ library ì¬ë“±ë¡ í•„ìš”
- âš ï¸ ê¸°ì¡´ pending royalties í¬ê¸°

**ìƒˆë¡œìš´ ì‹œì‘ìœ¼ë¡œ ë” ê²¬ê³ í•œ ì‹œìŠ¤í…œ êµ¬ì¶• ì™„ë£Œ!** ğŸš€




